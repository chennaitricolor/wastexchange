<div class="create-bid-container">
  <div class="seller-info flex justify-start">
    <p class="text--large">{{ this.seller.name }}</p>
    <div class="display-picture">
      <img
        [attr.src]="'./../../../../assets/images/seller-dummy-dp.png'"
        alt="Display picture"
        height="88"
      />
    </div>
  </div>

  <div class="seller-basic-info">
    <p class="text--medium">Data last updated by seller - 12/06/19 - 17:05</p>
  </div>

  <div class="bid-form-container">
    <p class="text--largesecondary text--orange">Bidding Form</p>
    <div class="flex justify-start mt-2">
      <mat-form-field appearance="outline">
        <mat-label>Contact name</mat-label>
        <input matInput />
      </mat-form-field>
      <mat-form-field appearance="outline" class="ml-4">
        <mat-label>Pickup date</mat-label>
        <input matInput />
      </mat-form-field>
      <mat-form-field appearance="outline" class="ml-4">
        <mat-label>Pickup time</mat-label>
        <input matInput />
      </mat-form-field>
    </div>
    <table *ngIf="this.canRaiseBid" class="table">
      <thead>
        <tr>
          <th scope="col">Material</th>
          <th scope="col">Available Qty. (in kg)</th>
          <th scope="col">Bidding Qty. (in kg)</th>
          <th scope="col">Minimum Price (in ₹/kg)</th>
          <th scope="col">Bidding Price (in ₹/kg)</th>
          <th scope="col">Total Bid Price (in ₹)</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let material of this.materials | keyvalue">
          <td>{{ material.value }}</td>
          <td>
            {{
              this.bid.details[material.key]
                ? this.bid.details[material.key]?.quantity
                : "--"
            }}
          </td>
          <td>
            <input
              type="number"
              class="form-control"
              [(ngModel)]="this.bid.details[material.key].bidQuantity"
            />
          </td>
          <td>
            {{
              this.bid.details[material.key]
                ? this.bid.details[material.key]?.cost
                : "--"
            }}
          </td>
          <td>
            <input
              type="number"
              class="form-control"
              [(ngModel)]="this.bid.details[material.key].bidCost"
            />
          </td>
          <td>
            {{
              this.bid.details[material.key].bidQuantity *
                this.bid.details[material.key].bidCost
            }}
          </td>
        </tr>
        <tr>
          <td colspan="5" class="text--right">Total Bidding Price</td>
          <td><input type="number" class="form-control" /></td>
        </tr>
      </tbody>
    </table>
    <div class="actions flex justify-end">
      <button
        mat-stroked-button
        color="primary"
        class="rounded-button mr-2"
        [routerLink]="['/buyer', this.appServ.loggedInUserInfo.id, 'browse']"
      >
        Cancel
      </button>
      <button
        mat-flat-button
        color="primary"
        class="rounded-button"
        (click)="this.createOrUpdateBid()"
      >
        Confirm
      </button>
    </div>
  </div>
</div>

<wm-page-actions [user]="this.bid">
  <div class="actions flex mt-4">
    <button
      mat-flat-button
      color="primary"
      class="rounded-button"
      [routerLink]="['/buyer', this.appServ.loggedInUserInfo.id, 'bid-list']"
    >
      View Pending Bids
    </button>
  </div>
</wm-page-actions>
